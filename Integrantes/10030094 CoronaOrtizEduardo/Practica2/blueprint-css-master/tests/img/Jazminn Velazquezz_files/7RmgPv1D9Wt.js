/*!CK:687473115!*//*1377492166,178159153*/

if (self.CavalryLogger) { CavalryLogger.start_js(["90q\/\/"]); }

__d("FeedSimulatePerfHit",["Run","emptyFunction","requestAnimationFrame"],function(a,b,c,d,e,f){var g=b('Run'),h=b('emptyFunction'),i=b('requestAnimationFrame'),j;function k(n){var o=Date.now();while(Date.now()-o<n);}function l(n){if(j)return;var o=n.length,p=function(){k(n[Math.floor(Math.random()*o)]);i(p);};p();g.onLeave(function(){p=h;j=false;});}var m={init:function(n,o){if(n==='sleep')l(o);}};e.exports=m;});
__d("ScrollPerfLogger",["Arbiter","Event","Run","ScriptPath","ScubaSample","SubscriptionsHandler","UserAgent","requestAnimationFrame"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Event'),i=b('Run'),j=b('ScriptPath'),k=b('ScubaSample'),l=b('SubscriptionsHandler'),m=b('UserAgent'),n=b('requestAnimationFrame'),o;function p(){if(o!==undefined)return o;var ga=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;return (o=!!ga);}function q(){if(w[0]>ca.max_frames){t();y=!ca.continuous;if(y){ba&&ba.release();ba=null;}else{u();n(q);}return;}if(y)return;var ga=Date.now();if(ga-z<ca.max_idle_time)for(var ha in w)if(ga-aa>ha)w[ha]++;aa=ga;n(q);}var r;function s(){if(typeof r!=='undefined')return r;if(m.chrome()){r='Chrome '+m.chrome();}else if(m.webkit()){r='WebKit '+m.webkit();}else if(m.firefox()){r='Firefox '+m.firefox();}else if(m.ie()){r='IE '+m.ie();}else if(m.opera()){r='Opera '+m.opera();}else r=null;return r;}function t(){if(y||w[0]<ca.min_frames)return;var ga=new k('scroll',null,{addBrowserFields:true});ga.addNormal('experiment',x);ga.addNormal('time_bucket',v());ga.addNormal('script_path',j.getScriptPath());if(s())ga.addNormal('browser_name_and_version',s());for(var ha in da)ga.addNormal(ha,da[ha]);var ia={};for(var ja in w){if(ja===0)continue;ia[ja]=Math.round(w[ja]/w[0]*ca.count_ratio);}for(ja in ia){if(ja===0)continue;ga.addInteger('freeze'+ja,ia[ja]);}ga.addInteger('total_frames',w[0]);ga.flush();}function u(){w={0:0,50:0,100:0,200:0,500:0,1000:0};aa=Date.now();}function v(){var ga=Date.now()-ea;if(ga<=300000){return '0 - 5m';}else if(ga<=600000){return '5 - 10m';}else if(ga<=1800000){return '10 - 30m';}else if(ga<=3600000){return '30 - 60m';}else return '1+ h';}var w,x='',y,z=0,aa=0,ba,ca,da,ea,fa={init:function(ga,ha,ia){if(ha&&ha.must_support_raf&&!p())return;x=ga;ca=ha;da=ia||{};ea=Date.now();y=false;ba=new l();ba.addSubscriptions(h.listen(window,'scroll',function(){z=Date.now();}));u();n(q);i.onLeave(function(){t();y=true;ba.release();ba=null;});}};e.exports=fa;});